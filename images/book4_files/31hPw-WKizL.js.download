(function(h){var l=window.AmazonUIPageJS||window.P,n=l._namespace||l.attributeErrors,a=n?n("DetailPageAlohaAssets",""):l;a.guardFatal?a.guardFatal(h)(a,window):a.execute(function(){h(a,window)})})(function(h,l,n){h.when("A").register("aloha-cartapi",function(a){return{createAddToCartRequest:function(m,b,c,e,g,k){k=k||5E3;g=g||e;var d={items:[]};return{count:function(){return d.items.length},call:function(f){if(0<d.items.length){var p={"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',
Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Accept-Language":"en-US","x-api-csrf-token":b},q=a.$('meta[name\x3d"encrypted-slate-token"]');q.length&&q.attr("content")?(l.ue.count("simpleBundleAjaxSlateTokenPresent",1),p["x-amzn-encrypted-slate-token"]=q.attr("content")):l.ue.count("simpleBundleAjaxSlateTokenAbsent",1);a.$.ajax({url:f===n?m+"?ref_\x3ddp_atch_abb_atc":m+"?ref_\x3d"+f,xhrFields:{withCredentials:!0},type:"POST",headers:p,data:JSON.stringify(d),timeout:k,
success:c,error:e,abort:g})}},addItem:function(a,b,e){d.items.push({asin:a,offerListingId:b,quantity:Number(e||1)})}}}}});"use strict";h.when("A","a-modal","aloha-simplebundle-common","ready").execute(function(a,m,b){function c(b){!k&&a.onScreen(document.getElementById(e.SIMPLE_BUNDLE),0)&&(k=!0,a.defer(function(){b.logNexusImpressionsOnDpx(g.DESKTOP)}))}var e={AUI_PAGE_ROOT:"#a-page",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SIMPLE_BUNDLE:"simpleBundleV2_feature_div"},g={DESKTOP:"desktop"},
k=!1,d=a.debounce(function(){if(a.$(e.SB_ROOT).length){var f=b.getSimpleBundlePageState()||{},d=f.csrfToken,m=f.cartEndpoint,l=f.items||[];f={baseAsin:f.baseAsin,marketplaceId:f.marketPlaceId,baseItemPrice:a.$("#base-product-price").data("base-product-price"),clientType:"aloha-simplebundle-desktop",currencyOfPreferenceSupported:f.currencyOfPreferenceSupported||!1};var h=b.createMetricsLogger(f,l,g.DESKTOP);c(h);if(!k)a.on(a.constants.BROWSER_EVENTS.SCROLL,function(){c(h)});h.setupMiniDpImpressionTriggering();
b.setupAccessoryAddToCart(l,h,m,d)}},200);(function(){a.declarative("show-review-tab","click",function(b){a.$(b.$target).closest(e.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});a.declarative("focus-image","mouseenter",function(a){var b=a.$target,c=b.parents(e.AUI_PAGE_ROOT);a=a.data;c.find("#productImageMain-"+a.asin).attr("src",a.imageUrl);c.find(".thumbnail-group").removeClass("a-button-selected");c.find("#"+b.prop("name")).addClass("a-button-selected")})})();d();a.on("a:pageUpdate",d);a.on("attach:dss:initialized",
function(){a.off("a:pageUpdate",d);d()})});"use strict";h.when("A","aloha-cartapi").register("aloha-simplebundle-common",function(a,m){var b=/[^\d,\.]/g,c=/,/g,e=/\./g,g=/(^\D+|\D+$)/,k=Date.now().toString(10)+Math.random().toString(16).substring(2,13),d=!1;return{createMetricsLogger:function(f,d,m){function h(a,b,e,c,g){var r=t(f.baseItemPrice);return{baseAsin:f.baseAsin,basePrice:r.priceDecimal,currencySymbol:r.currencySymbol,clientType:f.clientType,producerId:"atch",marketplaceId:f.marketplaceId,
uniqueId:k,accessoryAsin:a,accessoryPrice:b,displayPosition:e,featureLayout:c,deviceType:g}}function p(a,b){l.ue&&l.ue.event&&l.ue.event(a,"atch",b,{ssd:!0})}function n(a){return f.currencyOfPreferenceSupported?{priceFormatted:a.ourPrice,priceDecimal:parseFloat(a.ourPriceAmount)||null,currencySymbol:a.ourPriceSymbol}:t(a.ourPrice)}function t(a){a=a||"";var f=a.lastIndexOf(","),d=a.lastIndexOf(".");if(f>d){d=e;var r=c}else d=c,r=e;(f=a.match(g))&&(f=f[0].trim());d=a.replace(b,"").replace(d,"").replace(r,
".");d=parseFloat(d);return{priceFormatted:a,currencySymbol:f,priceDecimal:d}}a.defer(function(){l.ue&&l.ue.count&&l.ue.count("aloha-simplebundle-view",1)});return{logExpandedLink:function(){l.ue&&l.ue.count&&l.ue.count("aloha-simplebundle-buybox-expanded-link",1)},logNexusImpressionsOnDpx:function(){for(var a=0;a<d.length;a++){var b=d[a];b=h(b.asin,n(b).priceDecimal,a,"dpx",m);p(b,"attach.ABBImpression.7")}},setupMiniDpImpressionTriggering:function(){a.$(".simpleBundle-popover-title").unbind("click").bind("click",
function(a){a=parseInt(a.currentTarget.className.split("popover-simpleBundle-link-")[1].at(0));var b=d[a];a=h(b.asin,n(b).priceDecimal,a,"minidp",m);p(a,"attach.ABBImpression.7")})},logNexusAddAccessoryToCart:function(a,b,e,c,d){var f=h();f.accessoryAsin=a;f.accessoryPrice=n(b).priceDecimal;f.displayPosition=e;f.featureLayout=c;f.deviceType=d;p(f,"attach.ABBAddAccessoryToCart.4")}}},getSimpleBundlePageState:function(){var b=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(b)},
setupAccessoryAddToCart:function(b,e,c,g){function f(b,f,d,n,p,q){var t=m.createAddToCartRequest(c,g,function(a){k(b);e.logNexusAddAccessoryToCart(b,f,d,p,q);h.when("EWC").execute("abb-everywhere-cart",function(a){a.refresh()});var c=a.entity.count.entity.items;h.when("nav.setCartCount").execute("abb-nav-cart",function(a){a(c)});h.when("mash").execute("abb-mash",function(a){a.cart.didUpdate({newCartQuantity:c})})},function(){a.$("#abb_add_accessory_spinner_"+b).addClass("aok-hidden");a.$("#minidp_add_accessory_spinner_"+
b).addClass("aok-hidden");a.$("#abb_add_accessory_error_"+b).removeClass("aok-hidden");a.$("#minidp_add_accessory_error_"+b).removeClass("aok-hidden");l.ueLogError&&l.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});t.addItem(b,f.offerListingId);t.call(n)}function k(b){a.$("#abb_add_accessory_spinner_"+b).addClass("aok-hidden");a.$("#minidp_add_accessory_spinner_"+b).addClass("aok-hidden");
a.$("#abb_add_accessory_alert_"+b).removeClass("aok-hidden");a.$("#minidp_add_accessory_alert_"+b).removeClass("aok-hidden")}d||(d=!0,a.$(".simpleBundleSection").each(function(b,c){a.$(c).closest("#simpleBundleV2_feature_div").length||a.$(c).closest("#simpleBundle_feature_div").length||c.remove()}),a.declarative("abb-accessory-add","click",function(c){var e=c.data;c=e.asin;var d;a:{for(d=0;d<b.length;d++)if(b[d].asin===c)break a;d=void 0}var g=b[d];e=e.atcRefmarker;var k=e.includes("base")?"dpx":
"minidp",m=e.includes("desktop")?"desktop":"mobile";a.$("#abb_accessory_add_button_"+c).addClass("aok-hidden");a.$("#minidp_accessory_add_button_"+c).addClass("aok-hidden");a.$("#abb_add_accessory_spinner_"+c).removeClass("aok-hidden");a.$("#minidp_add_accessory_spinner_"+c).removeClass("aok-hidden");f(c,g,d,e,k,m)}))}}});h.when("A","ready").register("abb-buynow-api",function(a){var m=function(b){return a.$(b+" \x3e input[name\x3dofferingID]")};return{addFormParams:function(b,c){var e=a.$(b+" \x3e input[name\x3dasin]"),
g=m(b);b=a.$(b+" \x3e input[name\x3dquantity]");if((e=a.$(e))&&0!==e.length&&e.val()&&-1===e.val().indexOf(c.asin)&&a.$(b)&&0!==a.$(b).length&&a.$(b).val()&&a.$(g)&&0!==a.$(g).length&&a.$(g).val()){var k=e.val()+"|"+c.asin,d=a.$(g).val()+"|"+c.offeringID;c=a.$(b).val()+"|"+c.quantity;e.val(k);a.$(g).val(d);a.$(b).val(c)}},removeFormParams:function(b,c){var e=a.$(b+" \x3e input[name\x3dasin]"),g=m(b);b=a.$(b+" \x3e input[name\x3dquantity]");if((e=a.$(e))&&0!==e.length&&e.val()&&-1!==e.val().indexOf(c.asin)&&
a.$(b)&&0!==a.$(b).length&&a.$(b).val()&&a.$(g)&&0!==a.$(g).length&&a.$(g).val()){var k=e.val().split("|");c=k.indexOf(c.asin);k.splice(c,1);e.val(k.join("|"));e=a.$(g).val().split("|");e.splice(c,1);a.$(g).val(e.join("|"));g=a.$(b).val().split("|");g.splice(c,1);a.$(b).val(g.join("|"))}}}});"use strict";h.when("A").register("aloha-buy-now-integration",function(a){var m=a.$,b={};h.when("turbo-checkout-buy-now-integration").execute(function(a){b=a});return{isBuyNow:function(a){return 0===Object.entries(b).length&&
b.constructor===Object?"buy-now-button"===a.attr("id")||"addToCart"===a.attr("id"):"function"===typeof b.isBuyNow&&b.isBuyNow(a)||"buy-now-button"===a.attr("id")},checkoutWith:function(a,e){if(0===Object.entries(b).length&&b.constructor===Object){var c;for(c=1;0<e.find('input[name\x3d"asin.'+c+'"]').length||0<e.find('input[name\x3d"offeringID.'+c+'"]').length;)c++;for(var k=[],d=0;d<a.length;d++){var f=a[d];if(f!==n&&f.asin&&f.offerListingId){var h=c;f=[m("\x3cinput /\x3e",{type:"hidden",name:"asin."+
h,value:f.asin}),m("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+h,value:f.offerListingId}),m("\x3cinput /\x3e",{type:"hidden",name:"quantity."+h,value:f.quantity||1})];Array.prototype.push.apply(k,f);c++}else logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',f)}a=e.find('input[name\x3d"itemCount"]');1===a.length?a.val(c):e.append(m("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:c}));e.append.apply(e,k)}else return b.checkoutWith(a,
e)}}});"use strict";h.when("A").register("aloha-buy-back-integration",function(a){var h=a.$;return{isBuyBack:function(a){return"buyBackBuyNow"===a.attr("id")},checkoutWith:function(a,c){var b;for(b=1;0<c.find('input[name\x3d"asin.'+b+'"]').length||0<c.find('input[name\x3d"offeringID.'+b+'"]').length;)b++;for(var g=[],k=0;k<a.length;k++){var d=a[k];if(d!==n&&d.asin&&d.offerListingId){var f=b;d=[h("\x3cinput /\x3e",{type:"hidden",name:"asin."+f,value:d.asin}),h("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+
f,value:d.offerListingId}),h("\x3cinput /\x3e",{type:"hidden",name:"quantity."+f,value:d.quantity||1})];Array.prototype.push.apply(g,d);b++}else logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',d)}a=c.find('input[name\x3d"itemCount"]');1===a.length?a.val(b):c.append(h("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:b}));c.append.apply(c,g)}}})});