'use strict';mix_d("BuffetDisclaimersCards__buffet-disclaimers-card:buffet-disclaimers-card__CdHAgaz4","exports tslib @c/aui-utils @c/logger @c/remote-operations @c/scoped-dom @p/buffet-sidesheet @c/metrics".split(" "),function(I,n,J,V,W,X,Y,Z){function w(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var u=w(V),aa=w(W),d=w(X),E=w(Y),K;(function(a){a.BEFORE_FIRST_OPEN="before first open";a.OPEN="open";a.CLOSE="close"})(K||(K={}));var L;(function(a){a.RIGHT_OUT_OF_SCREEN="-120%";a.INSIDE_SCREEN=
"0px"})(L||(L={}));var F;(function(a){a.MOBILE="mobile";a.DESKTOP="desktop"})(F||(F={}));var M;(function(a){a.ATF="ATF";a.BTF="BTF"})(M||(M={}));var p;(function(a){a.FATAL="FATAL";a.ERROR="ERROR";a.WARN="WARN"})(p||(p={}));var x;(function(a){a.CLIENT_LOAD="Buffet.Client.Load";a.INGRESS_LINK_CLICK="Buffet.Sidesheet.IngressLinkClick";a.SIDESHEET_OPENED="Buffet.Sidesheet.Open";a.SIDESHEET_CLOSED="Buffet.Sidesheet.Close";a.SIDESHEET_DWELL_TIME="Buffet.Sidesheet.DwellTime";a.SIDESHEET_CONTENT_LOADED="Buffet.SdesheetContent.Load";
a.SIDESHEET_CONTENT_LOAD_LATENCY="Buffet.SidesheetContent.LoadLatency";a.PSI_PILL_CLICK="Buffet.SidesheetContent.PsiPillClick";a.MANUFACTURER_PILL_CLICK="Buffet.SidesheetContent.ManufacturerPillClick";a.RSP_PILL_CLICK="Buffet.SidesheetContent.RspPillClick";a.PSI_ZOOM_IN_CLICK="Buffet.SidesheetContent.PsiZoomInClick";a.PSI_ZOOM_OUT_CLICK="Buffet.SidesheetContent.PsiZoomOutClick";a.MISSING_ASIN_ERROR="Buffet.MissingAsin.Error";a.MISSING_CRUCIAL_ELEMENTS_ERROR="Buffet.MissingCrucialElements.Error";a.MISSING_GPSR_CONTENT_ERROR=
"Buffet.MissingGpsrContent.Error";a.SIDESHEET_OPEN_ERROR="Buffet.Sidesheet.Open.Error";a.SIDESHEET_CONTENT_LOAD_ERROR="Buffet.Sidesheet.ContentLoad.Error"})(x||(x={}));var N=function(a,b,f,c){void 0===c&&(c=1);Z.count(a+"."+b+"."+f,c)},ba=function(a,b,f){if(a){var c=!1,g=a.querySelectorAll("li"),l=a.querySelectorAll("img");g.forEach(function(q){q.style.maxWidth="1600px"});l.forEach(function(q){q.addEventListener("click",function(){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,
function(y){c?(N(b,f,x.PSI_ZOOM_OUT_CLICK),g.forEach(function(h){h.style.width=""}),l.forEach(function(h){h.style.maxWidth="100%";var r=d["default"].cardRoot.querySelector("#"+h.id+"-zoomed-out").value;h.src=r}),c=!1):(N(b,f,x.PSI_ZOOM_IN_CLICK),g.forEach(function(h){h.style.width="1600px"}),l.forEach(function(h){h.style.maxWidth="1600px";var r=d["default"].cardRoot.querySelector("#"+h.id+"-zoomed-in").value;h.src=r}),c=!0);return[2]})})})})}},O;(function(a){a.SHOW="show";a.HIDE="hide";a.CLICK="click";
a.BEFORE_SHOW="beforeShow";a.WEE_SHOW="weeShow";a.RSP_SHOW="rspShow"})(O||(O={}));var e;(function(a){a[a.RSP=0]="RSP";a[a.MANUFACTURER=1]="MANUFACTURER";a[a.PSI=2]="PSI"})(e||(e={}));var z=function(a,b){a&&!a.classList.contains(b)&&a.classList.add(b)},P=function(a){if(!a.every(function(b){return b})||!a.map(function(b){return b.id}).every(function(b){return b}))throw Error("Some HTML elements are missing.");},Q=function(a){return{html:a.innerHTML,className:a.className,style:a.style.cssText}},A=function(a,
b){a.innerHTML=b.html;a.className=b.className;a.style.cssText=b.style},B=function(a,b,f){for(var c in e){var g=e[c];if(g===a)z(b[g],"a-button-selected"),(g=f[g])&&g.classList.contains("aok-hidden")&&g.classList.remove("aok-hidden");else{var l=b[g];l&&l.classList.contains("a-button-selected")&&l.classList.remove("a-button-selected");z(f[g],"aok-hidden")}}};I._operationNames=[];I.card=function(){return n.__awaiter(void 0,void 0,void 0,function(){var a,b,f,c,g,l,q,y,h,r,k,m,C,R,S,T,G,H,U;return n.__generator(this,
function(ca){a=d["default"].cardRoot.getElementsByClassName("buffet-sidesheet-root")[0];b=d["default"].cardRoot.getElementsByClassName("buffetDisclaimerAsinValue")[0];if(!a||!b||!b.value)return u["default"].log("ASIN is missing from the side sheet and second call to AAPI.",p.ERROR),[2];f=d["default"].cardRoot.querySelector("#buffet-sidesheet-content");c=d["default"].cardRoot.querySelector("#buffet-sidesheet-content-spinner");g=d["default"].cardRoot.querySelector("#buffet-sidesheet-error-alert");l=
[f,c,g];try{P(l)}catch(v){return u["default"].log("Cannot find crucial HTML Elements for rendering Buffet side sheet.",p.FATAL),[2]}q=Q(c);y=Q(f);h=aa["default"].setup(["getContent"]);r=Object.keys(e).length/2;k=Array(r);m=Array(r);C=!0;R=function(){k[e.RSP]=d["default"].cardRoot.querySelector("#buffet-sidesheet-rsp-pill");k[e.MANUFACTURER]=d["default"].cardRoot.querySelector("#buffet-sidesheet-manufacturer-pill");k[e.PSI]=d["default"].cardRoot.querySelector("#buffet-sidesheet-psi-pill");m[e.RSP]=
d["default"].cardRoot.querySelector("#buffet-sidesheet-rsp-content-container");m[e.MANUFACTURER]=d["default"].cardRoot.querySelector("#buffet-sidesheet-manufacturer-content-container");m[e.PSI]=d["default"].cardRoot.querySelector("#buffet-sidesheet-psi-content-container");try{P(m)}catch(v){u["default"].log("Cannot find Buffet Sidesheet pill button elements",p.ERROR)}k[e.RSP].addEventListener("click",function(){B(e.RSP,k,m)});k[e.MANUFACTURER].addEventListener("click",function(){B(e.MANUFACTURER,k,
m)});k[e.PSI].addEventListener("click",function(){B(e.PSI,k,m)});B(e.PSI,k,m)};S=function(){return n.__awaiter(void 0,void 0,void 0,function(){var v,t;return n.__generator(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),C=!1,A(c,q),A(f,y),[4,h.getContent({asin:b.value})];case 1:return v=D.sent(),f.innerHTML+=v.outerHTML,t=d["default"].cardRoot.querySelector("#buffet-psi-carousel"),ba(t,F.DESKTOP,"BTF"),R(),c.style.opacity="0",J.delay(function(){z(c,"aok-hidden");f.style.opacity=
"1"},200),[3,3];case 2:return D.sent(),C=!0,u["default"].log("Experiencing some issues to load side sheet view",p.ERROR),A(c,q),A(f,y),g=d["default"].cardRoot.querySelector("#buffet-sidesheet-error-alert"),g.style.display="block",c.style.opacity="0",J.delay(function(){z(c,"aok-hidden");f.style.opacity="1"},200),[3,3];case 3:return[2]}})})};T=function(v){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return E["default"].showSidesheet(),
C?[4,S()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})};G=d["default"].cardRoot.getElementsByClassName("_buffet-disclaimers-card_styleDesktopGeneral_buffet-sidesheet-dark-background__3gFTu")[0];H=d["default"].cardRoot.getElementsByClassName("_buffet-disclaimers-card_styleDesktopGeneral_buffet-sidesheet-close-button__1DS2x")[0];(U=d["default"].cardRoot.getElementsByClassName("_buffet-disclaimers-card_styleDesktopGeneral_buffet-sidesheet-ingress__3MwFr")[0])&&G&&H?(G.addEventListener("click",
E["default"].closeSidesheet),H.addEventListener("click",E["default"].closeSidesheet),U.addEventListener("click",T)):u["default"].log("Cannot find the HTML components for Buffet side sheet content.",p.ERROR);return[2]})})}});
